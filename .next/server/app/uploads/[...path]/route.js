(()=>{var e={};e.id=5695,e.ids=[5695],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9875:(e,t,r)=>{"use strict";r.d(t,{FH:()=>p,rY:()=>u,wK:()=>c});var s=r(79748),a=r(33873),o=r.n(a);let n=(()=>{let e=process.env.UPLOADS_DIR,t=e?o().resolve(e):o().join(process.cwd(),"public","uploads");return t.endsWith(o().sep)?t:`${t}${o().sep}`})();function i(...e){let t=o().normalize(o().join(n,...e));if(!t.startsWith(n))throw Error("Invalid upload path");return t}async function u(e,t,r){let a=i(e);await (0,s.mkdir)(a,{recursive:!0});let n=o().join(a,t);return await (0,s.writeFile)(n,r),n}function p(e,t){let r=e.replace(/^\/+|\/+$/g,"");return`/uploads/${r}/${t}`}function c(e){if(!Array.isArray(e)||0===e.length)throw Error("Missing path");return i(...e)}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},79748:e=>{"use strict";e.exports=require("fs/promises")},93166:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>j,routeModule:()=>h,serverHooks:()=>v,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>w});var s={};r.r(s),r.d(s,{GET:()=>m,HEAD:()=>x,runtime:()=>d});var a=r(42706),o=r(28203),n=r(45994),i=r(39187),u=r(79748),p=r(33873),c=r.n(p),l=r(9875);let d="nodejs",g={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",webp:"image/webp",avif:"image/avif",gif:"image/gif",svg:"image/svg+xml"};async function m(e,t){let r;let s=await t.params,a=Array.isArray(s.path)?s.path:[];if(!a.length)return i.NextResponse.json({error:"Not found"},{status:404});try{r=(0,l.wK)(a)}catch{return i.NextResponse.json({error:"Not found"},{status:404})}try{var o;if(!(await (0,u.stat)(r)).isFile())return i.NextResponse.json({error:"Not found"},{status:404});let e=await (0,u.readFile)(r);return new i.NextResponse(e,{status:200,headers:{"content-type":(o=r,g[c().extname(o).slice(1).toLowerCase()]||"application/octet-stream"),"cache-control":"public, max-age=31536000, immutable"}})}catch(e){if(e?.code==="ENOENT")return i.NextResponse.json({error:"Not found"},{status:404});return console.error("uploads read error",e),i.NextResponse.json({error:"Failed to read file"},{status:500})}}async function x(e,t){let r=await m(e,t);return new i.NextResponse(null,{status:r.status,headers:r.headers})}let h=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/uploads/[...path]/route",pathname:"/uploads/[...path]",filename:"route",bundlePath:"app/uploads/[...path]/route"},resolvedPagePath:"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/uploads/[...path]/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:f,workUnitAsyncStorage:w,serverHooks:v}=h;function j(){return(0,n.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:w})}},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,5452],()=>r(93166));module.exports=s})();