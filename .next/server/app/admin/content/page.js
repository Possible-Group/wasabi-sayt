(()=>{var e={};e.id=9556,e.ids=[9556],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5020:(e,a,s)=>{Promise.resolve().then(s.t.bind(s,13219,23)),Promise.resolve().then(s.t.bind(s,34863,23)),Promise.resolve().then(s.t.bind(s,25155,23)),Promise.resolve().then(s.t.bind(s,40802,23)),Promise.resolve().then(s.t.bind(s,9350,23)),Promise.resolve().then(s.t.bind(s,48530,23)),Promise.resolve().then(s.t.bind(s,81601,23)),Promise.resolve().then(s.t.bind(s,88921,23))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14310:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/admin/content/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/admin/content/page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19611:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>o,metadata:()=>d,viewport:()=>c});var t=s(62740),i=s(52639),n=s.n(i),l=s(17343),r=s.n(l);s(23141),s(42924);let d={icons:{icon:"/icons/logo.png",apple:"/icons/logo.png"},formatDetection:{telephone:!1,email:!1,address:!1}},c={width:"device-width",initialScale:1};function o({children:e}){return(0,t.jsx)("html",{lang:"ru",children:(0,t.jsx)("body",{className:`ws-body ${n().variable} ${r().variable}`,children:e})})}},20282:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c});var t=s(70260),i=s(28203),n=s(25155),l=s.n(n),r=s(67292),d={};for(let e in r)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>r[e]);s.d(a,d);let c={children:["",{children:["admin",{children:["content",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,14310)),"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/admin/content/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,54899)),"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/admin/content/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/content/page",pathname:"/admin/content",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},22698:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>o});var t=s(45512),i=s(58009),n=s(64849);let l=[{slug:"about",title:"О нас"},{slug:"contacts",title:"Контакты и адрес"},{slug:"vacancies",title:"Вакансии"},{slug:"delivery",title:"Доставка и оплата"},{slug:"promotions",title:"Акции"}],r={badgeRu:"С заботой о вкусе",badgeUz:"Muhabbat bilan tayyorlanadi",stats:[{id:"exp",value:"15+",labelRu:"Лет опыта",labelUz:"Yil tajriba"},{id:"menu",value:"80+",labelRu:"Позиции в меню",labelUz:"Taomlar menyuda"},{id:"loc",value:"3",labelRu:"Локации",labelUz:"Lokatsiya"}]};function d(e,a){return`${e}:${a}`}function c(e){return"string"==typeof e?e.trim():""}function o(){let[e,a]=(0,i.useState)([]),[s,o]=(0,i.useState)({imageUrl:"",href:"",locale:"all",sortOrder:0,active:!0}),[m,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(!1),[x,b]=(0,i.useState)({}),[v,j]=(0,i.useState)(null),[g,f]=(0,i.useState)(null),[N,y]=(0,i.useState)([]),[w,k]=(0,i.useState)(!1),[C,U]=(0,i.useState)(""),[P,S]=(0,i.useState)([]),[_,O]=(0,i.useState)([]),[A,R]=(0,i.useState)([]),[z,W]=(0,i.useState)(""),[D,I]=(0,i.useState)(!1),[T,M]=(0,i.useState)(r),[$,E]=(0,i.useState)(!1),L=(0,i.useMemo)(()=>e.slice().sort((e,a)=>e.sortOrder-a.sortOrder),[e]),q=(0,i.useMemo)(()=>{let e=new Map;return P.forEach(a=>{let s=c(a.product_id??"");s&&e.set(s,a)}),e},[P]),Z=(0,i.useMemo)(()=>N.map(e=>q.get(e)).filter(Boolean),[N,q]),J=(0,i.useMemo)(()=>{let e=C.trim().toLowerCase(),a=P;e&&(a=a.filter(a=>{let s=c(a.product_name??"").toLowerCase(),t=c(a.category_name??"").toLowerCase();return s.includes(e)||t.includes(e)}));let s=new Set(N);return a.filter(e=>!s.has(c(e.product_id??"")))},[P,C,N]);function K(e,a){y(s=>{let t=s.indexOf(e);if(t<0)return s;let i=t+a;if(i<0||i>=s.length)return s;let n=s.slice(),[l]=n.splice(t,1);return n.splice(i,0,l),n})}async function G(){k(!0);try{let e=await fetch("/api/admin/popular-products",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({ids:N})}),a=await e.json().catch(()=>null);if(!e.ok){(0,n.A)(a?.error||"Ошибка сохранения","error");return}Array.isArray(a?.ids)&&y(a.ids),(0,n.A)("Популярные товары сохранены")}catch(e){(0,n.A)("Ошибка сохранения","error")}finally{k(!1)}}function F(e,a){R(s=>s.map(s=>s.id===e?{...s,...a}:s))}function B(e,a){R(s=>{let t=s.findIndex(a=>a.id===e);if(t<0)return s;let i=t+a;if(i<0||i>=s.length)return s;let n=s.slice(),[l]=n.splice(t,1);return n.splice(i,0,l),n})}async function X(){I(!0);try{let e=await fetch("/api/admin/about-locations",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({locations:A})}),a=await e.json().catch(()=>null);if(!e.ok){(0,n.A)(a?.error||"Ошибка сохранения","error");return}Array.isArray(a?.locations)&&R(a.locations),(0,n.A)("Локации сохранены")}catch(e){(0,n.A)("Ошибка сохранения","error")}finally{I(!1)}}function Y(e){M(a=>({...a,...e}))}function H(e,a){M(s=>({...s,stats:s.stats.map(s=>s.id===e?{...s,...a}:s)}))}async function Q(){E(!0);try{let e=await fetch("/api/admin/about-stats",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(T)}),a=await e.json().catch(()=>null);if(!e.ok){(0,n.A)(a?.error||"Ошибка сохранения","error");return}M(function(e){let a="string"==typeof e?.badgeRu&&e.badgeRu.trim()?e.badgeRu:r.badgeRu,s="string"==typeof e?.badgeUz&&e.badgeUz.trim()?e.badgeUz:r.badgeUz,t=Array.isArray(e?.stats)?e.stats:[],i=[];for(let e=0;e<r.stats.length;e+=1){let a=r.stats[e],s=t[e]||{};i.push({id:String(s?.id??a.id),value:String(s?.value??a.value),labelRu:s?.labelRu??a.labelRu??"",labelUz:s?.labelUz??a.labelUz??""})}return{badgeRu:a,badgeUz:s,stats:i}}(a)),(0,n.A)("Статистика сохранена")}catch(e){(0,n.A)("Ошибка сохранения","error")}finally{E(!1)}}let V=(0,i.useMemo)(()=>{let e=z.trim().toLowerCase();return e?_.filter(a=>{let s=c(a.name??"").toLowerCase(),t=c(a.address??"").toLowerCase();return s.includes(e)||t.includes(e)}):_},[_,z]);function ee(e,s){a(a=>a.map(a=>a.id===e?{...a,...s}:a))}async function ea(e){f(e.id);try{let s=await fetch("/api/admin/banners",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({id:e.id,imageUrl:e.imageUrl,href:e.href||"",locale:e.locale||"all",sortOrder:Number.isFinite(e.sortOrder)?e.sortOrder:0,active:e.active})}),t=await s.json().catch(()=>null);if(!s.ok){(0,n.A)(t?.error||"Ошибка сохранения","error");return}t?.row&&a(a=>a.map(a=>a.id===e.id?t.row:a)),(0,n.A)("Баннер сохранен")}catch(e){(0,n.A)("Ошибка сохранения","error")}finally{f(null)}}async function es(e){try{let s=await fetch(`/api/admin/banners?id=${e}`,{method:"DELETE"}),t=await s.json().catch(()=>null);if(!s.ok){(0,n.A)(t?.error||"Ошибка удаления","error");return}a(a=>a.filter(a=>a.id!==e)),(0,n.A)("Баннер удален")}catch(e){(0,n.A)("Ошибка удаления","error")}}async function et(){if(s.imageUrl)try{let e=await fetch("/api/admin/banners",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({imageUrl:s.imageUrl,href:s.href||"",locale:s.locale||"all",sortOrder:Number.isFinite(s.sortOrder)?s.sortOrder:0,active:s.active})}),t=await e.json().catch(()=>null);if(!e.ok){(0,n.A)(t?.error||"Ошибка сохранения","error");return}t?.row&&(a(e=>[...e,t.row]),o({imageUrl:"",href:"",locale:"all",sortOrder:0,active:!0}),u(null)),(0,n.A)("Баннер добавлен")}catch(e){(0,n.A)("Ошибка сохранения","error")}}async function ei(){if(m){p(!0);try{let e=new FormData;e.append("file",m);let a=await fetch("/api/admin/banners/upload",{method:"POST",body:e}),s=await a.json().catch(()=>null);if(!a.ok){(0,n.A)(s?.error||"Ошибка загрузки","error");return}s?.url&&o(e=>({...e,imageUrl:s.url})),(0,n.A)("Файл загружен")}catch(e){(0,n.A)("Ошибка загрузки","error")}finally{p(!1)}}}function en(e,a,s){let t=d(e,a);b(i=>({...i,[t]:{...i[t]||{slug:e,locale:a},...s}}))}async function el(e,a){let s=d(e,a),t=x[s]||{slug:e,locale:a};j(s);try{let i=await fetch("/api/admin/content-pages",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({slug:e,locale:a,title:t.title||"",body:t.body||"",seoTitle:t.seoTitle||"",seoDescription:t.seoDescription||"",seoKeywords:t.seoKeywords||""})}),l=await i.json().catch(()=>null);if(!i.ok){(0,n.A)(l?.error||"Ошибка сохранения","error");return}l?.row&&b(e=>({...e,[s]:l.row})),(0,n.A)("Контент сохранен")}catch(e){(0,n.A)("Ошибка сохранения","error")}finally{j(null)}}return(0,t.jsxs)("div",{className:"admin-container stack-lg",children:[(0,t.jsxs)("div",{className:"stack",children:[(0,t.jsx)("h1",{className:"admin-title",children:"Контент"}),(0,t.jsx)("p",{className:"admin-subtitle",children:"Баннеры, страницы и SEO для статичных разделов."})]}),(0,t.jsxs)("section",{className:"admin-card stack",children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"Баннеры"}),(0,t.jsxs)("div",{className:"admin-grid",children:[(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"Добавить баннер"}),(0,t.jsxs)("label",{className:"admin-field",children:["Ссылка на изображение",(0,t.jsx)("input",{className:"admin-input",placeholder:"/uploads/banners/...",value:s.imageUrl,onChange:e=>o(a=>({...a,imageUrl:e.target.value}))})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Или загрузить файл",(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>u(e.target.files?.[0]||null)})]}),(0,t.jsx)("button",{className:"admin-button",disabled:h||!m,onClick:ei,children:h?"...":"Загрузить"})]}),(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"Данные баннера"}),(0,t.jsxs)("label",{className:"admin-field",children:["Ссылка (куда ведет)",(0,t.jsx)("input",{className:"admin-input",placeholder:"/ru/menu",value:s.href,onChange:e=>o(a=>({...a,href:e.target.value}))})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Язык показа",(0,t.jsxs)("select",{className:"admin-input",value:s.locale,onChange:e=>o(a=>({...a,locale:e.target.value})),children:[(0,t.jsx)("option",{value:"all",children:"Все языки"}),(0,t.jsx)("option",{value:"ru",children:"Русский"}),(0,t.jsx)("option",{value:"uz",children:"Узбекский"})]})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Порядок",(0,t.jsx)("input",{className:"admin-input",type:"number",value:s.sortOrder,onChange:e=>o(a=>({...a,sortOrder:Number(e.target.value)}))})]}),(0,t.jsxs)("label",{className:"admin-field",style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsx)("span",{children:"Активен"}),(0,t.jsx)("input",{type:"checkbox",checked:s.active,onChange:e=>o(a=>({...a,active:e.target.checked}))})]}),(0,t.jsx)("button",{className:"admin-button",disabled:!s.imageUrl,onClick:et,children:"Добавить"})]})]}),(0,t.jsx)("div",{className:"stack",children:L.map(e=>(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsxs)("div",{className:"admin-inline",children:[(0,t.jsxs)("div",{className:"admin-subtitle",children:["ID: ",e.id]}),(0,t.jsx)("div",{className:"admin-pill",children:e.active?"Активен":"Скрыт"}),(0,t.jsx)("div",{className:"admin-pill",children:(e.locale??"all")==="ru"?"RU":(e.locale??"all")==="uz"?"UZ":"Все языки"})]}),(0,t.jsxs)("div",{className:"admin-grid",children:[(0,t.jsx)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:(0,t.jsx)("div",{className:"admin-thumb",style:{width:140,height:90},children:e.imageUrl?(0,t.jsx)("img",{src:e.imageUrl,alt:"banner",loading:"lazy"}):(0,t.jsx)("div",{className:"admin-thumb__empty",children:"Нет фото"})})}),(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsxs)("label",{className:"admin-field",children:["URL изображения",(0,t.jsx)("input",{className:"admin-input",value:e.imageUrl,onChange:a=>ee(e.id,{imageUrl:a.target.value})})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Ссылка",(0,t.jsx)("input",{className:"admin-input",value:e.href||"",onChange:a=>ee(e.id,{href:a.target.value})})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Язык показа",(0,t.jsxs)("select",{className:"admin-input",value:e.locale??"all",onChange:a=>ee(e.id,{locale:a.target.value}),children:[(0,t.jsx)("option",{value:"all",children:"Все языки"}),(0,t.jsx)("option",{value:"ru",children:"Русский"}),(0,t.jsx)("option",{value:"uz",children:"Узбекский"})]})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Порядок",(0,t.jsx)("input",{className:"admin-input",type:"number",value:e.sortOrder,onChange:a=>ee(e.id,{sortOrder:Number(a.target.value)})})]}),(0,t.jsxs)("label",{className:"admin-field",style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsx)("span",{children:"Активен"}),(0,t.jsx)("input",{type:"checkbox",checked:e.active,onChange:a=>ee(e.id,{active:a.target.checked})})]}),(0,t.jsxs)("div",{className:"admin-inline",children:[(0,t.jsx)("button",{className:"admin-button",disabled:g===e.id,onClick:()=>ea(e),children:g===e.id?"...":"Сохранить"}),(0,t.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>es(e.id),children:"Удалить"})]})]})]})]},e.id))})]}),(0,t.jsxs)("section",{className:"admin-card stack",children:[(0,t.jsx)("div",{className:"admin-inline",children:(0,t.jsx)("div",{style:{fontWeight:600},children:"Статистика (О нас)"})}),(0,t.jsx)("p",{className:"admin-subtitle",children:"Данные для блока “О нас”: бейдж и показатели. Отображается на странице “О нас”."}),(0,t.jsxs)("div",{className:"admin-grid",children:[(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"Значения"}),T.stats.map((e,a)=>(0,t.jsxs)("label",{className:"admin-field",children:["Значение #",a+1,(0,t.jsx)("input",{className:"admin-input",value:e.value,onChange:a=>H(e.id,{value:a.target.value})})]},e.id))]}),(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"RU"}),(0,t.jsxs)("label",{className:"admin-field",children:["Бейдж (RU)",(0,t.jsx)("input",{className:"admin-input",value:T.badgeRu,onChange:e=>Y({badgeRu:e.target.value})})]}),T.stats.map((e,a)=>(0,t.jsxs)("label",{className:"admin-field",children:["Подпись #",a+1," (RU)",(0,t.jsx)("input",{className:"admin-input",value:e.labelRu||"",onChange:a=>H(e.id,{labelRu:a.target.value})})]},e.id))]}),(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"UZ"}),(0,t.jsxs)("label",{className:"admin-field",children:["Бейдж (UZ)",(0,t.jsx)("input",{className:"admin-input",value:T.badgeUz,onChange:e=>Y({badgeUz:e.target.value})})]}),T.stats.map((e,a)=>(0,t.jsxs)("label",{className:"admin-field",children:["Подпись #",a+1," (UZ)",(0,t.jsx)("input",{className:"admin-input",value:e.labelUz||"",onChange:a=>H(e.id,{labelUz:a.target.value})})]},e.id))]})]}),(0,t.jsx)("div",{className:"admin-inline",children:(0,t.jsx)("button",{className:"admin-button",disabled:$,onClick:Q,children:$?"...":"Сохранить"})})]}),(0,t.jsxs)("section",{className:"admin-card stack",children:[(0,t.jsxs)("div",{className:"admin-inline",children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"Локации (О нас)"}),(0,t.jsxs)("div",{className:"admin-pill",children:["Выбрано: ",A.length,"/3"]})]}),(0,t.jsx)("p",{className:"admin-subtitle",children:"Выберите 3 локации из Poster, задайте название и описание на RU/UZ, координаты и адрес."}),(0,t.jsxs)("div",{className:"admin-grid",children:[(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"Выбранные локации"}),0===A.length?(0,t.jsx)("div",{className:"admin-subtitle",children:"Пока не выбрано ни одной локации."}):A.map(e=>{let a=e.lat&&e.lng?`https://maps.google.com/maps?q=${e.lat},${e.lng}&z=15&output=embed`:"";return(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsxs)("div",{className:"admin-inline",children:[(0,t.jsxs)("div",{className:"admin-subtitle",children:["ID: ",e.id]}),e.spotId?(0,t.jsxs)("div",{className:"admin-pill",children:["Poster: ",e.spotId]}):null,(0,t.jsxs)("div",{className:"admin-inline",style:{marginLeft:"auto"},children:[(0,t.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>B(e.id,-1),children:"↑"}),(0,t.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>B(e.id,1),children:"↓"}),(0,t.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>{var a;return a=e.id,void R(e=>e.filter(e=>e.id!==a))},children:"Удалить"})]})]}),(0,t.jsxs)("div",{className:"admin-grid",children:[(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"RU"}),(0,t.jsxs)("label",{className:"admin-field",children:["Название (RU)",(0,t.jsx)("input",{className:"admin-input",value:e.nameRu||"",onChange:a=>F(e.id,{nameRu:a.target.value})})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Адрес (RU)",(0,t.jsx)("input",{className:"admin-input",value:e.addressRu||"",onChange:a=>F(e.id,{addressRu:a.target.value})})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Описание (RU)",(0,t.jsx)("textarea",{className:"admin-textarea",value:e.descRu||"",onChange:a=>F(e.id,{descRu:a.target.value})})]})]}),(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"UZ"}),(0,t.jsxs)("label",{className:"admin-field",children:["Название (UZ)",(0,t.jsx)("input",{className:"admin-input",value:e.nameUz||"",onChange:a=>F(e.id,{nameUz:a.target.value})})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Адрес (UZ)",(0,t.jsx)("input",{className:"admin-input",value:e.addressUz||"",onChange:a=>F(e.id,{addressUz:a.target.value})})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Описание (UZ)",(0,t.jsx)("textarea",{className:"admin-textarea",value:e.descUz||"",onChange:a=>F(e.id,{descUz:a.target.value})})]})]}),(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"Координаты"}),(0,t.jsxs)("label",{className:"admin-field",children:["Широта (lat)",(0,t.jsx)("input",{className:"admin-input",value:e.lat??"",onChange:a=>F(e.id,{lat:a.target.value?Number(a.target.value):null})})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Долгота (lng)",(0,t.jsx)("input",{className:"admin-input",value:e.lng??"",onChange:a=>F(e.id,{lng:a.target.value?Number(a.target.value):null})})]}),a?(0,t.jsx)("div",{className:"admin-card",style:{padding:0,overflow:"hidden"},children:(0,t.jsx)("iframe",{title:`map-${e.id}`,src:a,style:{width:"100%",height:180,border:0},loading:"lazy"})}):(0,t.jsx)("div",{className:"admin-subtitle",children:"Добавьте координаты для карты."}),e.lat&&e.lng?(0,t.jsx)("a",{className:"admin-button admin-button-muted",href:`https://www.google.com/maps?q=${e.lat},${e.lng}`,target:"_blank",rel:"noreferrer",children:"Открыть карту"}):null]})]})]},e.id)})]}),(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"Заведения из Poster"}),(0,t.jsx)("input",{className:"admin-input",placeholder:"Поиск по названию или адресу...",value:z,onChange:e=>W(e.target.value)}),(0,t.jsx)("div",{className:"stack",children:V.map(e=>{let a=A.some(a=>a.spotId===e.spot_id);return(0,t.jsxs)("div",{className:"admin-inline",children:[(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:e.name}),(0,t.jsx)("div",{className:"admin-subtitle",children:e.address}),(0,t.jsx)("div",{className:"admin-subtitle",children:e.lat&&e.lng?`${e.lat}, ${e.lng}`:"Координаты не заданы"})]}),(0,t.jsx)("button",{className:"admin-button",disabled:a||A.length>=3,onClick:()=>{var a;return a=e,void(!(A.length>=3)&&(A.some(e=>e.spotId===a.spot_id)||R(e=>[...e,{id:a.spot_id,spotId:a.spot_id,nameRu:a.name,nameUz:"",addressRu:a.address??"",addressUz:"",descRu:"",descUz:"",lat:a.lat??null,lng:a.lng??null}])))},children:a?"Добавлено":"Добавить"})]},e.spot_id)})}),A.length>=3?(0,t.jsx)("div",{className:"admin-subtitle",children:"Можно выбрать максимум 3 локации."}):null]})]}),(0,t.jsxs)("div",{className:"admin-inline",children:[(0,t.jsx)("button",{className:"admin-button",disabled:D,onClick:X,children:D?"...":"Сохранить"}),(0,t.jsx)("div",{className:"admin-subtitle",children:"Эти локации появятся на странице “О нас”."})]})]}),(0,t.jsxs)("section",{className:"admin-card stack",children:[(0,t.jsxs)("div",{className:"admin-inline",children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"Популярные товары"}),(0,t.jsxs)("div",{className:"admin-pill",children:["Выбрано: ",N.length]})]}),(0,t.jsx)("p",{className:"admin-subtitle",children:"Выберите товары для главной страницы. Порядок отображения сохраняется."}),(0,t.jsxs)("div",{className:"admin-grid",children:[(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"Выбрано"}),0===Z.length?(0,t.jsx)("div",{className:"admin-subtitle",children:"Пока ничего не выбрано."}):Z.map(e=>{let a=c(e.product_id??""),s=c(e.product_name??"")||"Без названия",i=c(e.category_name??""),n=e.photo_origin||e.photo||e.image||"";return(0,t.jsxs)("div",{className:"admin-inline",style:{alignItems:"flex-start"},children:[(0,t.jsxs)("div",{className:"admin-media",style:{flex:1},children:[(0,t.jsx)("div",{className:"admin-thumb",style:{width:76,height:76},children:n?(0,t.jsx)("img",{src:n,alt:s,loading:"lazy"}):(0,t.jsx)("div",{className:"admin-thumb__empty",children:"Нет фото"})}),(0,t.jsxs)("div",{className:"stack",style:{gap:4},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:s}),i?(0,t.jsx)("div",{className:"admin-subtitle",children:i}):null,(0,t.jsxs)("div",{className:"admin-subtitle",children:["ID: ",a]})]})]}),(0,t.jsxs)("div",{className:"admin-inline",style:{marginLeft:"auto"},children:[(0,t.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>K(a,-1),children:"↑"}),(0,t.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>K(a,1),children:"↓"}),(0,t.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>{y(e=>e.filter(e=>e!==a))},children:"Удалить"})]})]},a)})]}),(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:"Все товары"}),(0,t.jsx)("input",{className:"admin-input",placeholder:"Поиск товара или категории...",value:C,onChange:e=>U(e.target.value)}),(0,t.jsx)("div",{className:"stack",children:J.slice(0,80).map(e=>{let a=c(e.product_id??""),s=c(e.product_name??"")||"Без названия",i=c(e.category_name??""),n=e.photo_origin||e.photo||e.image||"";return(0,t.jsxs)("div",{className:"admin-inline",style:{alignItems:"flex-start"},children:[(0,t.jsxs)("div",{className:"admin-media",style:{flex:1},children:[(0,t.jsx)("div",{className:"admin-thumb",style:{width:70,height:70},children:n?(0,t.jsx)("img",{src:n,alt:s,loading:"lazy"}):(0,t.jsx)("div",{className:"admin-thumb__empty",children:"Нет фото"})}),(0,t.jsxs)("div",{className:"stack",style:{gap:4},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:s}),i?(0,t.jsx)("div",{className:"admin-subtitle",children:i}):null,(0,t.jsxs)("div",{className:"admin-subtitle",children:["ID: ",a]})]})]}),(0,t.jsx)("button",{className:"admin-button",onClick:()=>{a&&y(e=>e.includes(a)?e:[...e,a])},children:"Добавить"})]},a)})}),J.length>80?(0,t.jsx)("div",{className:"admin-subtitle",children:"Показаны первые 80 результатов."}):null]})]}),(0,t.jsxs)("div",{className:"admin-inline",children:[(0,t.jsx)("button",{className:"admin-button",disabled:w,onClick:G,children:w?"...":"Сохранить"}),(0,t.jsx)("div",{className:"admin-subtitle",children:"Эти товары появятся в карусели на главной странице."})]})]}),l.map(e=>(0,t.jsxs)("section",{className:"admin-card stack",children:[(0,t.jsx)("div",{style:{fontWeight:600},children:e.title}),(0,t.jsx)("div",{className:"admin-grid",children:["ru","uz"].map(a=>{let s=d(e.slug,a),i=x[s]||{slug:e.slug,locale:a};return(0,t.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,t.jsx)("div",{style:{fontWeight:600},children:a.toUpperCase()}),(0,t.jsxs)("label",{className:"admin-field",children:["Заголовок",(0,t.jsx)("input",{className:"admin-input",value:i.title||"",onChange:s=>en(e.slug,a,{title:s.target.value})})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Текст",(0,t.jsx)("textarea",{className:"admin-textarea",value:i.body||"",onChange:s=>en(e.slug,a,{body:s.target.value})})]}),(0,t.jsx)("div",{className:"admin-divider"}),(0,t.jsxs)("label",{className:"admin-field",children:["Meta title",(0,t.jsx)("input",{className:"admin-input",value:i.seoTitle||"",onChange:s=>en(e.slug,a,{seoTitle:s.target.value})})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Meta description",(0,t.jsx)("textarea",{className:"admin-textarea",value:i.seoDescription||"",onChange:s=>en(e.slug,a,{seoDescription:s.target.value})})]}),(0,t.jsxs)("label",{className:"admin-field",children:["Meta keywords",(0,t.jsx)("input",{className:"admin-input",placeholder:"ключ1, ключ2, ключ3",value:i.seoKeywords||"",onChange:s=>en(e.slug,a,{seoKeywords:s.target.value})})]}),(0,t.jsx)("button",{className:"admin-button",style:{width:"100%"},disabled:v===s,onClick:()=>el(e.slug,a),children:v===s?"...":"Сохранить"})]},s)})})]},e.slug))]})}},23141:()=>{},23568:(e,a,s)=>{"use strict";s.d(a,{default:()=>c});var t=s(45512),i=s(28531),n=s.n(i),l=s(79334),r=s(58009);s(64849);let d=[{href:"/admin",label:"Дашборд"},{href:"/admin/settings",label:"Настройки"},{href:"/admin/translations",label:"Переводы"},{href:"/admin/categories",label:"Категории"},{href:"/admin/content",label:"Контент"},{href:"/admin/news",label:"Новости"},{href:"/admin/reviews",label:"Отзывы"},{href:"/admin/account",label:"Аккаунт"}];function c({children:e}){let a=(0,l.usePathname)(),s=(0,l.useRouter)(),[i,c]=(0,r.useState)(null),[o,m]=(0,r.useState)([]),u=(0,r.useRef)(new Map),h=a?.startsWith("/admin/login"),p=(0,r.useMemo)(()=>d.map(e=>{let s=a===e.href;return(0,t.jsx)(n(),{href:e.href,className:`admin-link${s?" active":""}`,children:e.label},e.href)}),[a]);async function x(){await fetch("/api/auth/admin/logout",{method:"POST"}),s.replace("/admin/login")}return h?(0,t.jsx)("div",{className:"admin-login",children:e}):(0,t.jsxs)("div",{className:"admin-root",children:[(0,t.jsxs)("aside",{className:"admin-sidebar",children:[(0,t.jsx)("div",{className:"admin-brand",children:"Wasabi Admin"}),(0,t.jsx)("nav",{className:"admin-nav",children:p}),(0,t.jsxs)("div",{className:"admin-meta",children:[(0,t.jsx)("div",{children:i?`Вход: ${i}`:"Сессия активна"}),(0,t.jsx)("button",{className:"admin-button admin-button-muted",onClick:x,children:"Выйти"})]})]}),(0,t.jsx)("main",{className:"admin-main",children:e}),o.length>0?(0,t.jsx)("div",{className:"admin-toast-stack",role:"status","aria-live":"polite",children:o.map(e=>{let a="error"===e.tone?"!":"info"===e.tone?"i":"OK";return(0,t.jsxs)("div",{className:`admin-toast admin-toast--${e.tone}`,onClick:()=>(function(e){m(a=>a.filter(a=>a.id!==e));let a=u.current.get(e);a&&window.clearTimeout(a),u.current.delete(e)})(e.id),children:[(0,t.jsx)("div",{className:`admin-toast__icon admin-toast__icon--${e.tone}`,children:a}),(0,t.jsx)("div",{className:"admin-toast__text",children:e.message})]},e.id)})}):null]})}},28620:()=>{},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37301:(e,a,s)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return d}});let t=function(e,a){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=i(a);if(s&&s.has(e))return s.get(e);var t={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var r=n?Object.getOwnPropertyDescriptor(e,l):null;r&&(r.get||r.set)?Object.defineProperty(t,l,r):t[l]=e[l]}return t.default=e,s&&s.set(e,t),t}(s(76301));function i(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,s=new WeakMap;return(i=function(e){return e?s:a})(e)}let n={current:null},l="function"==typeof t.cache?t.cache:e=>e,r=console.warn;function d(e){return function(...a){r(e(...a))}}l(e=>{try{r(n.current)}finally{n.current=null}})},42924:()=>{},43063:(e,a,s)=>{Promise.resolve().then(s.bind(s,55772))},54899:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>n});var t=s(62740);s(23141),s(28620);var i=s(55772);function n({children:e}){return(0,t.jsx)("html",{lang:"ru",children:(0,t.jsx)("body",{children:(0,t.jsx)(i.default,{children:e})})})}},55772:(e,a,s)=>{"use strict";s.d(a,{default:()=>t});let t=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/admin/AdminShell.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/admin/AdminShell.tsx","default")},61805:(e,a,s)=>{Promise.resolve().then(s.bind(s,22698))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64013:(e,a,s)=>{Promise.resolve().then(s.bind(s,14310))},64849:(e,a,s)=>{"use strict";s.d(a,{A:()=>i,r:()=>t});let t="admin-toast";function i(e,a="success",s=2400){}},81082:()=>{},91452:(e,a,s)=>{Promise.resolve().then(s.t.bind(s,66959,23)),Promise.resolve().then(s.t.bind(s,33875,23)),Promise.resolve().then(s.t.bind(s,88903,23)),Promise.resolve().then(s.t.bind(s,57174,23)),Promise.resolve().then(s.t.bind(s,84178,23)),Promise.resolve().then(s.t.bind(s,87190,23)),Promise.resolve().then(s.t.bind(s,48429,23)),Promise.resolve().then(s.t.bind(s,61365,23))},96207:(e,a,s)=>{Promise.resolve().then(s.bind(s,23568))},99010:()=>{}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[638,475,9620],()=>s(20282));module.exports=t})();