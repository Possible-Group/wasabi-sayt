(()=>{var e={};e.id=7022,e.ids=[7022],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10858:(e,t,s)=>{"use strict";s.d(t,{t:()=>i});let a={ru:{common:{brand:"Wasabi Sushi",slogan:"Свежо, быстро, честно",openMenu:"Открыть меню",orderInTelegram:"Заказать в Telegram",menu:"Меню",cart:"Корзина",checkout:"Оформление заказа",closedNow:"Сейчас не рабочее время",workHours:"Часы работы",addToCart:"В корзину",add:"В корзину",qty:"Кол-во",delivery:"Доставка",pickup:"На вынос",persons:"Персон",phone:"Телефон",name:"Имя",address:"Адрес",comment:"Комментарий",promo:"Промокод",apply:"Применить",total:"Итого",placeOrder:"Оформить заказ",admin:"Админ",login:"Логин",password:"Пароль",signIn:"Войти",logout:"Выйти",closed:"Сейчас не рабочее время"}},uz:{common:{brand:"WASABI SUSHI",slogan:"Yangi, tez, halol",openMenu:"Menyuni ochish",orderInTelegram:"Telegramda buyurtma",menu:"Menyu",cart:"Savat",checkout:"Buyurtma berish",closedNow:"Hozir ish vaqti emas",workHours:"Ish vaqti",addToCart:"Savatga",add:"Savatga",qty:"Soni",delivery:"Yetkazib berish",pickup:"Olib ketish",persons:"Odam",phone:"Telefon",name:"Ism",address:"Manzil",comment:"Izoh",promo:"Promokod",apply:"Qo‘llash",total:"Jami",placeOrder:"Buyurtma berish",admin:"Admin",login:"Login",password:"Parol",signIn:"Kirish",logout:"Chiqish",closed:"Hozir ish vaqti emas"}}};function i(e,t,s){let i=a[e];if(!t)return i;let r=t.split("."),n=i;for(let e of r){if(!n||"object"!=typeof n||!(e in n))return s??t;n=n[e]}return"string"==typeof n?n:s??t}},15974:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>c});var a=s(70260),i=s(28203),r=s(25155),n=s.n(r),o=s(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c={children:["",{children:["[locale]",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,59272)),"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/[locale]/checkout/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,83923)),"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/[locale]/checkout/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,95694)),"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/[locale]/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"]}]}.children,u=["/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/[locale]/checkout/page.tsx"],d={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/[locale]/checkout/page",pathname:"/[locale]/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},18020:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(45512),i=s(58009),r=s(20840),n=s(10858),o=s(61910),l=s(79334),c=s(18715),u=s(456),d=s(28531),m=s.n(d);let h={ru:{loginTitle:"Войдите в аккаунт",loginText:"Для оформления заказа нужно войти или зарегистрироваться.",loginCta:"Перейти в аккаунт",locationsTitle:"Мои локации",locationsEmpty:"Сохраненных адресов пока нет.",addLocation:"Добавить локацию",hideMap:"Скрыть карту",saveLocation:"Сохранить локацию",removeLocation:"Удалить",mapTitle:"Адрес доставки на карте",mapHint:"Кликните по карте, чтобы выбрать точку доставки.",mapLoading:"Загружаем карту...",mapError:"Не удалось загрузить карту. Попробуйте позже.",pickupTitle:"Филиалы для самовывоза",pickupEmpty:"Филиалы не найдены.",paymentTitle:"Оплата",paymentCash:"Наличными",paymentCard:"Картой",bonusTitle:"Бонусы",bonusAvailable:"Доступно бонусов",bonusUse:"Списать бонусы",bonusNone:"Нет доступных бонусов",promoHint:"Промокод проверим при подтверждении.",subtotalLabel:"Сумма заказа",deliveryFeeLabel:"Доставка",packageFeeLabel:"Упаковка",bonusUsedLabel:"Списано бонусами",totalLabel:"К оплате",errAuth:"Авторизуйтесь, чтобы оформить заказ.",errLocation:"Укажите точку на карте.",errSpot:"Выберите филиал.",errPromo:"Промокод недействителен.",errBonus:"Недостаточно бонусов.",errSend:"Ошибка при отправке заказа.",successTitle:"Заказ успешно отправлен",successText:"Спасибо! Мы свяжемся с вами для подтверждения.",successOrderLabel:"Номер заказа",successCta:"К меню",successClose:"Закрыть"},uz:{loginTitle:"Profilga kiring",loginText:"Buyurtma berish uchun kirish yoki ro'yxatdan o'tish kerak.",loginCta:"Profilga o'tish",locationsTitle:"Mening manzillarim",locationsEmpty:"Saqlangan manzillar yo'q.",addLocation:"Manzil qo'shish",hideMap:"Xaritani yopish",saveLocation:"Manzilni saqlash",removeLocation:"O'chirish",mapTitle:"Yetkazish manzili",mapHint:"Xaritada yetkazish nuqtasini tanlang.",mapLoading:"Xarita yuklanmoqda...",mapError:"Xaritani yuklab bo'lmadi. Keyinroq urinib ko'ring.",pickupTitle:"Olib ketish filiallari",pickupEmpty:"Filiallar topilmadi.",paymentTitle:"To'lov",paymentCash:"Naqd",paymentCard:"Karta",bonusTitle:"Bonuslar",bonusAvailable:"Mavjud bonuslar",bonusUse:"Bonusdan foydalanish",bonusNone:"Bonuslar yo'q",promoHint:"Promokodni tasdiqlashda tekshiramiz.",subtotalLabel:"Buyurtma summasi",deliveryFeeLabel:"Yetkazish",packageFeeLabel:"Qadoq",bonusUsedLabel:"Bonusdan yechildi",totalLabel:"To'lash",errAuth:"Buyurtma uchun kirish kerak.",errLocation:"Xaritadan manzilni tanlang.",errSpot:"Filialni tanlang.",errPromo:"Promokod noto'g'ri.",errBonus:"Bonus yetarli emas.",errSend:"Buyurtma yuborishda xatolik.",successTitle:"Buyurtma yuborildi",successText:"Rahmat! Buyurtmani tasdiqlash uchun siz bilan bog'lanamiz.",successOrderLabel:"Buyurtma raqami",successCta:"Menyuga",successClose:"Yopish"}};function p(e,t){try{return new Intl.NumberFormat("uz"===t?"uz-UZ":"ru-RU").format(e)}catch{return String(e)}}function y(e,t){return`${e.toFixed(5)}, ${t.toFixed(5)}`}async function b(e,t){try{let s=await fetch(`/api/geocode?lat=${e}&lng=${t}`,{cache:"no-store"}),a=await s.json().catch(()=>null);return String(a?.address??"").trim()||""}catch{return""}}function v(e){}async function x(e){try{await fetch("/api/auth/client/locations",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({locations:e})})}catch{}}function g(){let e=(0,l.useParams)(),t=Array.isArray(e?.locale)?e.locale[0]:e?.locale,s="string"==typeof t?t:"",d=(0,r.Zd)(s)?s:"ru",v="uz"===d?h.uz:h.ru,g=(0,l.useRouter)(),[k,f]=(0,i.useState)([]),[j,N]=(0,i.useState)({delivery:0,pack:0}),[_,w]=(0,i.useState)([]),[z,S]=(0,i.useState)(null),[T,C]=(0,i.useState)(!1),[P,q]=(0,i.useState)(null),[I,L]=(0,i.useState)(!0),[M,O]=(0,i.useState)("delivery"),[E,U]=(0,i.useState)(""),[R,D]=(0,i.useState)(""),[A,B]=(0,i.useState)(""),[$,F]=(0,i.useState)(""),[W,H]=(0,i.useState)(""),[X,Y]=(0,i.useState)("card"),[Q,G]=(0,i.useState)(""),[Z,J]=(0,i.useState)([]),[K,V]=(0,i.useState)(!1),[ee,et]=(0,i.useState)(""),[es,ea]=(0,i.useState)(null),[ei,er]=(0,i.useState)("idle"),en=(0,i.useRef)(null);(0,i.useRef)(null),(0,i.useRef)(null);let eo=(0,i.useRef)(0),[el,ec]=(0,i.useState)(null),[eu,ed]=(0,i.useState)(!1),[em,eh]=(0,i.useState)(!1),[ep,ey]=(0,i.useState)(null),[eb,ev]=(0,i.useState)(!1);function ex(e){var t;if(S(e.id),ea({lat:e.lat,lng:e.lng}),B(e.address),t=e.address,/^-?\d+(?:\.\d+)?\s*,\s*-?\d+(?:\.\d+)?$/.test(t.trim())){let t=++eo.current;b(e.lat,e.lng).then(s=>{t===eo.current&&s&&(B(s),w(t=>{let a=t.map(t=>t.id===e.id?{...t,address:s}:t);return P&&x(a),a}))}).catch(()=>void 0)}C(!1)}async function eg(){if(es){eh(!0);try{let e=A.trim();e||(e=await b(es.lat,es.lng)||`${es.lat.toFixed(6)}, ${es.lng.toFixed(6)}`);let t="",s=[];w(a=>{let i=a.find(e=>1e-5>Math.abs(e.lat-es.lat)&&1e-5>Math.abs(e.lng-es.lng));return i?(t=i.id,s=a.map(t=>t.id===i.id&&e&&t.address!==e?{...t,address:e}:t),x(s)):(s=[{id:t=`loc_${Date.now()}_${Math.random().toString(36).slice(2,7)}`,address:e,lat:es.lat,lng:es.lng},...a].slice(0,10),P&&x(s)),s}),t&&S(t),B(e),C(!1)}finally{eh(!1)}}}let ek=(0,o.vU)(k)/100,ef=Math.max(0,ek+(j.pack+("delivery"===M?j.delivery:0))),ej=Number(P?.bonus??0)||0,eN=(0,i.useMemo)(()=>{let e=Number(Q.trim().replace(",","."));return Number.isFinite(e)?e:0},[Q]),e_=Math.min(Math.max(eN,0),ej,ef),ew=Math.max(0,ef-e_);async function ez(){if(ec(null),!P){ec(v.errAuth);return}if(0===k.length)return ec("uz"===d?"Savat bo'sh":"Корзина пустая");if(!E.trim())return ec("uz"===d?"Telefon kiriting":"Введите телефон");if("delivery"===M){if(!es)return ec(v.errLocation);if(!A.trim())return ec("uz"===d?"Manzil kiriting":"Введите адрес")}else if(!ee)return ec(v.errSpot);if(eN>ej)return ec(v.errBonus);ed(!0);try{let e=await fetch("/api/orders",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({customerPhone:E.trim(),customerName:R.trim()||void 0,deliveryType:M,address:"delivery"===M?A.trim():void 0,lat:"delivery"===M?es?.lat:void 0,lng:"delivery"===M?es?.lng:void 0,spotId:"pickup"===M?ee:void 0,paymentMethod:X,bonusAmount:e_||0,promoCode:$.trim()||void 0,comment:W.trim()||void 0,items:k.map(e=>({product_id:e.product_id,name:e.name,price:e.price,qty:e.qty}))})}),t=await e.json().catch(()=>null);if(!e.ok){if(t?.error==="CLOSED")return ec(`${(0,n.t)(d,"common.closed")}. ${(0,n.t)(d,"common.workHours")}: ${t.workStart}–${t.workEnd}`);if(t?.error==="UNAUTHORIZED")return ec(v.errAuth);if(t?.error==="PHONE_REQUIRED")return ec("uz"===d?"Telefon kiriting":"Введите телефон");if(t?.error==="LOCATION_REQUIRED")return ec(v.errLocation);if(t?.error==="ADDRESS_REQUIRED")return ec("uz"===d?"Manzil kiriting":"Введите адрес");if(t?.error==="SPOT_REQUIRED")return ec(v.errSpot);if(t?.error==="INVALID_PROMO")return ec(v.errPromo);if(t?.error==="BONUS_EXCEEDED")return ec(v.errBonus);return ec(v.errSend)}(0,o.sX)(),f([]),F(""),H(""),G(""),"delivery"===M&&es&&await eg(),ey(t?.orderId?String(t.orderId):null),ev(!0)}finally{ed(!1)}}return(0,a.jsxs)("div",{className:"ws-page",children:[(0,a.jsx)(c.default,{locale:d}),(0,a.jsx)("main",{className:"site-main",children:(0,a.jsxs)("div",{className:"ws-container checkout-shell",children:[(0,a.jsx)("div",{className:"site-section__head",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"site-eyebrow",children:(0,n.t)(d,"common.checkout")}),(0,a.jsx)("h1",{className:"site-title",children:(0,n.t)(d,"common.checkout")}),(0,a.jsx)("p",{className:"site-subtitle",children:"uz"===d?"Ma'lumotlarni to'ldiring va buyurtmani tasdiqlang.":"Заполните данные и подтвердите заказ."})]})}),0===k.length?(0,a.jsxs)("div",{className:"site-card",children:[(0,a.jsx)("div",{className:"site-title",style:{fontSize:18},children:"uz"===d?"Savat bo'sh":"Корзина пустая"}),(0,a.jsx)("p",{className:"site-subtitle",children:"uz"===d?"Menyudan taom tanlang va savatga qo'shing.":"Выберите блюда из меню и добавьте в корзину."}),(0,a.jsx)(m(),{className:"site-button site-button--primary",href:`/${d}/menu`,children:"uz"===d?"Menyuga o'tish":"Перейти к меню"})]}):I?(0,a.jsx)("div",{className:"site-card",children:"uz"===d?"Yuklanmoqda...":"Загрузка..."}):P?(0,a.jsxs)("div",{className:"checkout-card",children:[(0,a.jsxs)("div",{className:"checkout-toggle",children:[(0,a.jsx)("button",{className:"delivery"===M?"is-active":"",onClick:()=>O("delivery"),children:(0,n.t)(d,"common.delivery")}),(0,a.jsx)("button",{className:"pickup"===M?"is-active":"",onClick:()=>O("pickup"),children:(0,n.t)(d,"common.pickup")})]}),"delivery"===M?(0,a.jsxs)("div",{className:"checkout-block",children:[(0,a.jsxs)("div",{className:"checkout-location-head",children:[(0,a.jsx)("div",{style:{fontWeight:600},children:v.locationsTitle}),(0,a.jsx)("button",{type:"button",className:"site-button site-button--ghost checkout-map-toggle",onClick:()=>C(e=>!e),children:T?v.hideMap:v.addLocation})]}),0===_.length?(0,a.jsx)("div",{className:"site-subtitle",children:v.locationsEmpty}):(0,a.jsx)("div",{className:"checkout-location-list",children:_.map(e=>{let t=z===e.id;return(0,a.jsxs)("div",{className:"checkout-location-row",children:[(0,a.jsxs)("button",{type:"button",className:`checkout-location-card${t?" is-active":""}`,onClick:()=>ex(e),children:[(0,a.jsx)("input",{className:"checkout-radio",type:"radio",checked:t,onChange:()=>ex(e)}),(0,a.jsxs)("div",{className:"checkout-location-meta",children:[(0,a.jsx)("div",{style:{fontWeight:700},children:e.address}),(0,a.jsx)("div",{className:"site-subtitle",children:y(e.lat,e.lng)})]})]}),(0,a.jsx)("button",{type:"button",className:"checkout-location-remove",onClick:()=>{var t;return t=e.id,void(w(e=>{let s=e.filter(e=>e.id!==t);return P&&x(s),s}),z===t&&(S(null),ea(null),B("")))},children:v.removeLocation})]},e.id)})}),T?(0,a.jsxs)("div",{className:"checkout-map-block",children:[(0,a.jsx)("div",{style:{fontWeight:600},children:v.mapTitle}),"error"===ei?(0,a.jsx)("div",{className:"checkout-map checkout-map__fallback",children:v.mapError}):(0,a.jsxs)("div",{className:"checkout-map",children:[(0,a.jsx)("div",{className:"checkout-map__canvas",id:"checkout-map-canvas",ref:en,style:{width:"100%",height:280}}),(0,a.jsxs)("div",{className:"checkout-map__hint",children:[(0,a.jsx)("span",{children:"loading"===ei?v.mapLoading:v.mapHint}),es?(0,a.jsxs)("span",{children:[es.lat.toFixed(5),", ",es.lng.toFixed(5)]}):null]})]})]}):null,(0,a.jsxs)("label",{className:"checkout-field",children:[(0,n.t)(d,"common.address"),(0,a.jsx)("input",{className:"checkout-input",placeholder:"uz"===d?"Manzil":"Адрес",value:A,onChange:e=>B(e.target.value)})]}),(0,a.jsxs)("div",{className:"checkout-location-actions",children:[(0,a.jsx)("button",{type:"button",className:"site-button site-button--ghost",disabled:!es||em,onClick:()=>void eg(),children:em?"...":v.saveLocation}),es?(0,a.jsx)("div",{className:"site-subtitle",children:y(es.lat,es.lng)}):null]})]}):(0,a.jsxs)("div",{className:"checkout-block",children:[(0,a.jsx)("div",{style:{fontWeight:600},children:v.pickupTitle}),K?(0,a.jsx)("div",{className:"site-subtitle",children:"uz"===d?"Yuklanmoqda...":"Загрузка..."}):0===Z.length?(0,a.jsx)("div",{className:"site-subtitle",children:v.pickupEmpty}):(0,a.jsx)("div",{className:"checkout-pickup-list",children:Z.map(e=>{let t=String(e.spotId||e.id||""),s=ee===t,i="uz"===d?e.nameUz||e.nameRu||"Filial":e.nameRu||e.nameUz||"Филиал",r="uz"===d?e.addressUz||e.addressRu:e.addressRu||e.addressUz;return(0,a.jsxs)("button",{type:"button",className:`checkout-pickup-card${s?" is-active":""}`,onClick:()=>et(t),children:[(0,a.jsx)("input",{className:"checkout-radio",type:"radio",checked:s,onChange:()=>et(t)}),(0,a.jsxs)("div",{className:"checkout-pickup-meta",children:[(0,a.jsx)("div",{style:{fontWeight:700},children:i}),r?(0,a.jsx)("div",{className:"site-subtitle",children:r}):null]})]},e.id)})})]}),(0,a.jsxs)("div",{className:"checkout-grid",children:[(0,a.jsxs)("label",{className:"checkout-field",children:[(0,n.t)(d,"common.phone"),(0,a.jsx)("input",{className:"checkout-input",placeholder:"+998",value:E,onChange:e=>U(e.target.value)})]}),(0,a.jsxs)("label",{className:"checkout-field",children:[(0,n.t)(d,"common.name"),(0,a.jsx)("input",{className:"checkout-input",placeholder:"uz"===d?"Ism":"Имя",value:R,onChange:e=>D(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"checkout-payment",children:[(0,a.jsx)("div",{style:{fontWeight:600},children:v.paymentTitle}),(0,a.jsxs)("div",{className:"checkout-payment__options",children:[(0,a.jsxs)("label",{className:`checkout-payment__option${"cash"===X?" is-active":""}`,children:[(0,a.jsx)("input",{type:"radio",name:"payment",checked:"cash"===X,onChange:()=>Y("cash")}),(0,a.jsx)("span",{children:v.paymentCash})]}),(0,a.jsxs)("label",{className:`checkout-payment__option${"card"===X?" is-active":""}`,children:[(0,a.jsx)("input",{type:"radio",name:"payment",checked:"card"===X,onChange:()=>Y("card")}),(0,a.jsx)("span",{children:v.paymentCard})]})]})]}),(0,a.jsxs)("div",{className:"checkout-bonus",children:[(0,a.jsx)("div",{style:{fontWeight:600},children:v.bonusTitle}),(0,a.jsxs)("div",{className:"checkout-grid",children:[(0,a.jsxs)("label",{className:"checkout-field",children:[v.bonusUse,(0,a.jsx)("input",{className:"checkout-input",type:"number",min:0,step:1,placeholder:v.bonusNone,value:Q,onChange:e=>G(e.target.value),disabled:ej<=0})]}),(0,a.jsxs)("div",{className:"checkout-field",children:[(0,a.jsx)("span",{children:v.bonusAvailable}),(0,a.jsxs)("strong",{style:{fontSize:16},children:[p(ej,d)," ","uz"===d?"so'm":"сум"]})]})]})]}),(0,a.jsxs)("div",{className:"checkout-grid",children:[(0,a.jsxs)("label",{className:"checkout-field",children:[(0,n.t)(d,"common.promo"),(0,a.jsx)("input",{className:"checkout-input",placeholder:"uz"===d?"Promo kod":"Промокод",value:$,onChange:e=>F(e.target.value)}),(0,a.jsx)("span",{className:"site-subtitle",children:v.promoHint})]}),(0,a.jsxs)("label",{className:"checkout-field",children:[(0,n.t)(d,"common.comment"),(0,a.jsx)("textarea",{className:"checkout-input",placeholder:"uz"===d?"Izoh":"Комментарий",value:W,onChange:e=>H(e.target.value),rows:3})]})]}),(0,a.jsx)("div",{className:"site-divider"}),(0,a.jsxs)("div",{className:"checkout-summary",children:[(0,a.jsxs)("div",{className:"checkout-summary__row",children:[(0,a.jsx)("span",{children:v.subtotalLabel}),(0,a.jsxs)("span",{children:[p(ek,d)," ","uz"===d?"so'm":"сум"]})]}),(0,a.jsxs)("div",{className:"checkout-summary__row",children:[(0,a.jsx)("span",{children:v.deliveryFeeLabel}),(0,a.jsxs)("span",{children:[p("delivery"===M?j.delivery:0,d)," ","uz"===d?"so'm":"сум"]})]}),(0,a.jsxs)("div",{className:"checkout-summary__row",children:[(0,a.jsx)("span",{children:v.packageFeeLabel}),(0,a.jsxs)("span",{children:[p(j.pack,d)," ","uz"===d?"so'm":"сум"]})]}),(0,a.jsxs)("div",{className:"checkout-summary__row",children:[(0,a.jsx)("span",{children:v.bonusUsedLabel}),(0,a.jsxs)("span",{children:["-",p(e_,d)," ","uz"===d?"so'm":"сум"]})]}),(0,a.jsxs)("div",{className:"checkout-summary__row checkout-summary__total",children:[(0,a.jsx)("span",{children:v.totalLabel}),(0,a.jsxs)("span",{children:[p(ew,d)," ","uz"===d?"so'm":"сум"]})]})]}),el&&(0,a.jsx)("div",{style:{color:"#b42318"},children:el}),(0,a.jsx)("button",{className:"site-button site-button--primary",disabled:eu,onClick:ez,children:eu?"...":(0,n.t)(d,"common.placeOrder")})]}):(0,a.jsxs)("div",{className:"site-card",children:[(0,a.jsx)("div",{className:"site-title",style:{fontSize:18},children:v.loginTitle}),(0,a.jsx)("p",{className:"site-subtitle",children:v.loginText}),(0,a.jsx)(m(),{className:"site-button site-button--primary",href:`/${d}/account`,children:v.loginCta})]})]})}),(0,a.jsx)(u.default,{locale:d}),eb?(0,a.jsx)("div",{className:"site-popup",role:"dialog","aria-modal":"true",children:(0,a.jsxs)("div",{className:"site-popup__card",children:[(0,a.jsx)("div",{className:"site-popup__badge",children:"Wasabi"}),(0,a.jsx)("div",{className:"site-popup__title",children:v.successTitle}),(0,a.jsx)("div",{className:"site-popup__text",children:v.successText}),ep?(0,a.jsxs)("div",{className:"site-popup__order",children:[v.successOrderLabel,": ",(0,a.jsxs)("strong",{children:["#",ep]})]}):null,(0,a.jsxs)("div",{className:"site-popup__actions",children:[(0,a.jsx)("button",{className:"site-button site-button--primary",onClick:()=>{ev(!1),g.push(`/${d}/menu`)},children:v.successCta}),(0,a.jsx)("button",{className:"site-button site-button--ghost",onClick:()=>ev(!1),children:v.successClose})]})]})}):null]})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20840:(e,t,s)=>{"use strict";s.d(t,{Zd:()=>i});let a=["ru","uz"];function i(e){return a.includes(e)}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33477:(e,t,s)=>{Promise.resolve().then(s.bind(s,18020))},33873:e=>{"use strict";e.exports=require("path")},37301:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return l}});let a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=i(t);if(s&&s.has(e))return s.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=r?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]}return a.default=e,s&&s.set(e,a),a}(s(76301));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(i=function(e){return e?s:t})(e)}let r={current:null},n="function"==typeof a.cache?a.cache:e=>e,o=console.warn;function l(e){return function(...t){o(e(...t))}}n(e=>{try{o(r.current)}finally{r.current=null}})},39557:(e,t,s)=>{Promise.resolve().then(s.bind(s,59272))},59272:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/[locale]/checkout/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/mycomp/Documents/IT/Projects/wasabi/wasabi-sayt-2/app/[locale]/checkout/page.tsx","default")},61910:(e,t,s)=>{"use strict";function a(){return[]}function i(e){localStorage.setItem("wasabi_cart_v1",JSON.stringify(e))}function r(e,t=1){let s=[],a=s.findIndex(t=>t.product_id===e.product_id);return a>=0?s[a].qty+=t:s.push({...e,qty:t}),i(s),s}function n(e,t){let s=[].map(s=>s.product_id===e?{...s,qty:t}:s).filter(e=>e.qty>0);return i(s),s}function o(){i([])}function l(e){return e.reduce((e,t)=>e+t.price*t.qty,0)}s.d(t,{IH:()=>n,Xl:()=>a,bE:()=>r,sX:()=>o,vU:()=>l})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},83923:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,generateMetadata:()=>o});var a=s(80636),i=s(23952);let r={ru:{title:"Оформление заказа Wasabi",description:"Введите данные для доставки и подтвердите заказ Wasabi.",keywords:"wasabi, оформление заказа, доставка, суши"},uz:{title:"Wasabi buyurtma rasmiylashtirish",description:"Yetkazish ma'lumotlarini kiriting va Wasabi buyurtmasini tasdiqlang.",keywords:"wasabi, buyurtma, yetkazish, sushi"}};async function n(e){let t=await i.z.seoMeta.findUnique({where:{page_locale:{page:"checkout",locale:e}}}),s=r[e];return{title:t?.title||s.title,description:t?.description||s.description,keywords:t?.keywords||s.keywords,ogImage:t?.ogImage||null}}async function o({params:e}){let t=await e,s=(0,a.Zd)(t.locale)?t.locale:"ru",i=await n(s);return{title:i.title,description:i.description,keywords:i.keywords,openGraph:i.ogImage?{title:i.title,description:i.description,images:[i.ogImage]}:void 0}}function l({children:e}){return e}},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,475,9620,7321],()=>s(15974));module.exports=a})();