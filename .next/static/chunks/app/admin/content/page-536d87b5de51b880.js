(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9556],{4456:(e,a,l)=>{Promise.resolve().then(l.bind(l,8702))},5299:(e,a,l)=>{"use strict";l.d(a,{A:()=>s,r:()=>i});let i="admin-toast";function s(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2400;window.dispatchEvent(new CustomEvent(i,{detail:{message:e,tone:a,duration:l}}))}},8702:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>m});var i=l(5155),s=l(2115),n=l(5299);let t=[{slug:"about",title:"О нас"},{slug:"contacts",title:"Контакты и адрес"},{slug:"vacancies",title:"Вакансии"},{slug:"delivery",title:"Доставка и оплата"},{slug:"promotions",title:"Акции"}],d={badgeRu:"С заботой о вкусе",badgeUz:"Muhabbat bilan tayyorlanadi",stats:[{id:"exp",value:"15+",labelRu:"Лет опыта",labelUz:"Yil tajriba"},{id:"menu",value:"80+",labelRu:"Позиции в меню",labelUz:"Taomlar menyuda"},{id:"loc",value:"3",labelRu:"Локации",labelUz:"Lokatsiya"}]};function r(e,a){return"".concat(e,":").concat(a)}function c(e){return"string"==typeof e?e.trim():""}function o(e){let a="string"==typeof(null==e?void 0:e.badgeRu)&&e.badgeRu.trim()?e.badgeRu:d.badgeRu,l="string"==typeof(null==e?void 0:e.badgeUz)&&e.badgeUz.trim()?e.badgeUz:d.badgeUz,i=Array.isArray(null==e?void 0:e.stats)?e.stats:[],s=[];for(let e=0;e<d.stats.length;e+=1){var n,t,r,c,o,m;let a=d.stats[e],l=i[e]||{};s.push({id:String(null!==(n=null==l?void 0:l.id)&&void 0!==n?n:a.id),value:String(null!==(t=null==l?void 0:l.value)&&void 0!==t?t:a.value),labelRu:null!==(c=null!==(r=null==l?void 0:l.labelRu)&&void 0!==r?r:a.labelRu)&&void 0!==c?c:"",labelUz:null!==(m=null!==(o=null==l?void 0:l.labelUz)&&void 0!==o?o:a.labelUz)&&void 0!==m?m:""})}return{badgeRu:a,badgeUz:l,stats:s}}function m(){let[e,a]=(0,s.useState)([]),[l,m]=(0,s.useState)({imageUrl:"",href:"",locale:"all",sortOrder:0,active:!0}),[u,h]=(0,s.useState)(null),[v,x]=(0,s.useState)(!1),[j,g]=(0,s.useState)({}),[p,b]=(0,s.useState)(null),[N,f]=(0,s.useState)(null),[y,w]=(0,s.useState)([]),[k,C]=(0,s.useState)(!1),[U,S]=(0,s.useState)(""),[A,R]=(0,s.useState)([]),[z,O]=(0,s.useState)([]),[_,W]=(0,s.useState)([]),[I,T]=(0,s.useState)(""),[D,E]=(0,s.useState)(!1),[L,P]=(0,s.useState)(d),[M,Z]=(0,s.useState)(!1);(0,s.useEffect)(()=>{fetch("/api/admin/banners").then(e=>e.json()).then(a),fetch("/api/admin/popular-products").then(e=>e.json()).then(e=>w(Array.isArray(null==e?void 0:e.ids)?e.ids:[])),fetch("/api/poster/products?include_hidden=1").then(e=>e.json()).then(e=>R(Array.isArray(e)?e:[])),fetch("/api/poster/spots").then(e=>e.json()).then(e=>O(Array.isArray(e)?e:[])),fetch("/api/admin/about-locations").then(e=>e.json()).then(e=>W(Array.isArray(null==e?void 0:e.locations)?e.locations:[])),fetch("/api/admin/about-stats").then(e=>e.json()).then(e=>P(o(e))),fetch("/api/admin/content-pages").then(e=>e.json()).then(e=>{let a={};e.forEach(e=>{a[r(e.slug,e.locale)]=e}),g(a)})},[]);let J=(0,s.useMemo)(()=>e.slice().sort((e,a)=>e.sortOrder-a.sortOrder),[e]),K=(0,s.useMemo)(()=>{let e=new Map;return A.forEach(a=>{var l;let i=c(null!==(l=a.product_id)&&void 0!==l?l:"");i&&e.set(i,a)}),e},[A]),F=(0,s.useMemo)(()=>y.map(e=>K.get(e)).filter(Boolean),[y,K]),q=(0,s.useMemo)(()=>{let e=U.trim().toLowerCase(),a=A;e&&(a=a.filter(a=>{var l,i;let s=c(null!==(l=a.product_name)&&void 0!==l?l:"").toLowerCase(),n=c(null!==(i=a.category_name)&&void 0!==i?i:"").toLowerCase();return s.includes(e)||n.includes(e)}));let l=new Set(y);return a.filter(e=>{var a;return!l.has(c(null!==(a=e.product_id)&&void 0!==a?a:""))})},[A,U,y]);function B(e,a){w(l=>{let i=l.indexOf(e);if(i<0)return l;let s=i+a;if(s<0||s>=l.length)return l;let n=l.slice(),[t]=n.splice(i,1);return n.splice(s,0,t),n})}async function Y(){C(!0);try{let e=await fetch("/api/admin/popular-products",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({ids:y})}),a=await e.json().catch(()=>null);if(!e.ok){(0,n.A)((null==a?void 0:a.error)||"Ошибка сохранения","error");return}Array.isArray(null==a?void 0:a.ids)&&w(a.ids),(0,n.A)("Популярные товары сохранены")}catch(e){(0,n.A)("Ошибка сохранения","error")}finally{C(!1)}}function G(e,a){W(l=>l.map(l=>l.id===e?{...l,...a}:l))}function H(e,a){W(l=>{let i=l.findIndex(a=>a.id===e);if(i<0)return l;let s=i+a;if(s<0||s>=l.length)return l;let n=l.slice(),[t]=n.splice(i,1);return n.splice(s,0,t),n})}async function Q(){E(!0);try{let e=await fetch("/api/admin/about-locations",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({locations:_})}),a=await e.json().catch(()=>null);if(!e.ok){(0,n.A)((null==a?void 0:a.error)||"Ошибка сохранения","error");return}Array.isArray(null==a?void 0:a.locations)&&W(a.locations),(0,n.A)("Локации сохранены")}catch(e){(0,n.A)("Ошибка сохранения","error")}finally{E(!1)}}function V(e){P(a=>({...a,...e}))}function X(e,a){P(l=>({...l,stats:l.stats.map(l=>l.id===e?{...l,...a}:l)}))}async function $(){Z(!0);try{let e=await fetch("/api/admin/about-stats",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(L)}),a=await e.json().catch(()=>null);if(!e.ok){(0,n.A)((null==a?void 0:a.error)||"Ошибка сохранения","error");return}P(o(a)),(0,n.A)("Статистика сохранена")}catch(e){(0,n.A)("Ошибка сохранения","error")}finally{Z(!1)}}let ee=(0,s.useMemo)(()=>{let e=I.trim().toLowerCase();return e?z.filter(a=>{var l,i;let s=c(null!==(l=a.name)&&void 0!==l?l:"").toLowerCase(),n=c(null!==(i=a.address)&&void 0!==i?i:"").toLowerCase();return s.includes(e)||n.includes(e)}):z},[z,I]);function ea(e,l){a(a=>a.map(a=>a.id===e?{...a,...l}:a))}async function el(e){f(e.id);try{let l=await fetch("/api/admin/banners",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({id:e.id,imageUrl:e.imageUrl,href:e.href||"",locale:e.locale||"all",sortOrder:Number.isFinite(e.sortOrder)?e.sortOrder:0,active:e.active})}),i=await l.json().catch(()=>null);if(!l.ok){(0,n.A)((null==i?void 0:i.error)||"Ошибка сохранения","error");return}(null==i?void 0:i.row)&&a(a=>a.map(a=>a.id===e.id?i.row:a)),(0,n.A)("Баннер сохранен")}catch(e){(0,n.A)("Ошибка сохранения","error")}finally{f(null)}}async function ei(e){try{let l=await fetch("/api/admin/banners?id=".concat(e),{method:"DELETE"}),i=await l.json().catch(()=>null);if(!l.ok){(0,n.A)((null==i?void 0:i.error)||"Ошибка удаления","error");return}a(a=>a.filter(a=>a.id!==e)),(0,n.A)("Баннер удален")}catch(e){(0,n.A)("Ошибка удаления","error")}}async function es(){if(l.imageUrl)try{let e=await fetch("/api/admin/banners",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({imageUrl:l.imageUrl,href:l.href||"",locale:l.locale||"all",sortOrder:Number.isFinite(l.sortOrder)?l.sortOrder:0,active:l.active})}),i=await e.json().catch(()=>null);if(!e.ok){(0,n.A)((null==i?void 0:i.error)||"Ошибка сохранения","error");return}(null==i?void 0:i.row)&&(a(e=>[...e,i.row]),m({imageUrl:"",href:"",locale:"all",sortOrder:0,active:!0}),h(null)),(0,n.A)("Баннер добавлен")}catch(e){(0,n.A)("Ошибка сохранения","error")}}async function en(){if(u){x(!0);try{let e=new FormData;e.append("file",u);let a=await fetch("/api/admin/banners/upload",{method:"POST",body:e}),l=await a.json().catch(()=>null);if(!a.ok){(0,n.A)((null==l?void 0:l.error)||"Ошибка загрузки","error");return}(null==l?void 0:l.url)&&m(e=>({...e,imageUrl:l.url})),(0,n.A)("Файл загружен")}catch(e){(0,n.A)("Ошибка загрузки","error")}finally{x(!1)}}}function et(e,a,l){let i=r(e,a);g(s=>({...s,[i]:{...s[i]||{slug:e,locale:a},...l}}))}async function ed(e,a){let l=r(e,a),i=j[l]||{slug:e,locale:a};b(l);try{let s=await fetch("/api/admin/content-pages",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({slug:e,locale:a,title:i.title||"",body:i.body||"",seoTitle:i.seoTitle||"",seoDescription:i.seoDescription||"",seoKeywords:i.seoKeywords||""})}),t=await s.json().catch(()=>null);if(!s.ok){(0,n.A)((null==t?void 0:t.error)||"Ошибка сохранения","error");return}(null==t?void 0:t.row)&&g(e=>({...e,[l]:t.row})),(0,n.A)("Контент сохранен")}catch(e){(0,n.A)("Ошибка сохранения","error")}finally{b(null)}}return(0,i.jsxs)("div",{className:"admin-container stack-lg",children:[(0,i.jsxs)("div",{className:"stack",children:[(0,i.jsx)("h1",{className:"admin-title",children:"Контент"}),(0,i.jsx)("p",{className:"admin-subtitle",children:"Баннеры, страницы и SEO для статичных разделов."})]}),(0,i.jsxs)("section",{className:"admin-card stack",children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Баннеры"}),(0,i.jsxs)("div",{className:"admin-grid",children:[(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Добавить баннер"}),(0,i.jsxs)("label",{className:"admin-field",children:["Ссылка на изображение",(0,i.jsx)("input",{className:"admin-input",placeholder:"/uploads/banners/...",value:l.imageUrl,onChange:e=>m(a=>({...a,imageUrl:e.target.value}))})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Или загрузить файл",(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;return h((null===(a=e.target.files)||void 0===a?void 0:a[0])||null)}})]}),(0,i.jsx)("button",{className:"admin-button",disabled:v||!u,onClick:en,children:v?"...":"Загрузить"})]}),(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Данные баннера"}),(0,i.jsxs)("label",{className:"admin-field",children:["Ссылка (куда ведет)",(0,i.jsx)("input",{className:"admin-input",placeholder:"/ru/menu",value:l.href,onChange:e=>m(a=>({...a,href:e.target.value}))})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Язык показа",(0,i.jsxs)("select",{className:"admin-input",value:l.locale,onChange:e=>m(a=>({...a,locale:e.target.value})),children:[(0,i.jsx)("option",{value:"all",children:"Все языки"}),(0,i.jsx)("option",{value:"ru",children:"Русский"}),(0,i.jsx)("option",{value:"uz",children:"Узбекский"})]})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Порядок",(0,i.jsx)("input",{className:"admin-input",type:"number",value:l.sortOrder,onChange:e=>m(a=>({...a,sortOrder:Number(e.target.value)}))})]}),(0,i.jsxs)("label",{className:"admin-field",style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsx)("span",{children:"Активен"}),(0,i.jsx)("input",{type:"checkbox",checked:l.active,onChange:e=>m(a=>({...a,active:e.target.checked}))})]}),(0,i.jsx)("button",{className:"admin-button",disabled:!l.imageUrl,onClick:es,children:"Добавить"})]})]}),(0,i.jsx)("div",{className:"stack",children:J.map(e=>{var a,l,s;return(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsxs)("div",{className:"admin-inline",children:[(0,i.jsxs)("div",{className:"admin-subtitle",children:["ID: ",e.id]}),(0,i.jsx)("div",{className:"admin-pill",children:e.active?"Активен":"Скрыт"}),(0,i.jsx)("div",{className:"admin-pill",children:(null!==(a=e.locale)&&void 0!==a?a:"all")==="ru"?"RU":(null!==(l=e.locale)&&void 0!==l?l:"all")==="uz"?"UZ":"Все языки"})]}),(0,i.jsxs)("div",{className:"admin-grid",children:[(0,i.jsx)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:(0,i.jsx)("div",{className:"admin-thumb",style:{width:140,height:90},children:e.imageUrl?(0,i.jsx)("img",{src:e.imageUrl,alt:"banner",loading:"lazy"}):(0,i.jsx)("div",{className:"admin-thumb__empty",children:"Нет фото"})})}),(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsxs)("label",{className:"admin-field",children:["URL изображения",(0,i.jsx)("input",{className:"admin-input",value:e.imageUrl,onChange:a=>ea(e.id,{imageUrl:a.target.value})})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Ссылка",(0,i.jsx)("input",{className:"admin-input",value:e.href||"",onChange:a=>ea(e.id,{href:a.target.value})})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Язык показа",(0,i.jsxs)("select",{className:"admin-input",value:null!==(s=e.locale)&&void 0!==s?s:"all",onChange:a=>ea(e.id,{locale:a.target.value}),children:[(0,i.jsx)("option",{value:"all",children:"Все языки"}),(0,i.jsx)("option",{value:"ru",children:"Русский"}),(0,i.jsx)("option",{value:"uz",children:"Узбекский"})]})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Порядок",(0,i.jsx)("input",{className:"admin-input",type:"number",value:e.sortOrder,onChange:a=>ea(e.id,{sortOrder:Number(a.target.value)})})]}),(0,i.jsxs)("label",{className:"admin-field",style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsx)("span",{children:"Активен"}),(0,i.jsx)("input",{type:"checkbox",checked:e.active,onChange:a=>ea(e.id,{active:a.target.checked})})]}),(0,i.jsxs)("div",{className:"admin-inline",children:[(0,i.jsx)("button",{className:"admin-button",disabled:N===e.id,onClick:()=>el(e),children:N===e.id?"...":"Сохранить"}),(0,i.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>ei(e.id),children:"Удалить"})]})]})]})]},e.id)})})]}),(0,i.jsxs)("section",{className:"admin-card stack",children:[(0,i.jsx)("div",{className:"admin-inline",children:(0,i.jsx)("div",{style:{fontWeight:600},children:"Статистика (О нас)"})}),(0,i.jsx)("p",{className:"admin-subtitle",children:"Данные для блока “О нас”: бейдж и показатели. Отображается на странице “О нас”."}),(0,i.jsxs)("div",{className:"admin-grid",children:[(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Значения"}),L.stats.map((e,a)=>(0,i.jsxs)("label",{className:"admin-field",children:["Значение #",a+1,(0,i.jsx)("input",{className:"admin-input",value:e.value,onChange:a=>X(e.id,{value:a.target.value})})]},e.id))]}),(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"RU"}),(0,i.jsxs)("label",{className:"admin-field",children:["Бейдж (RU)",(0,i.jsx)("input",{className:"admin-input",value:L.badgeRu,onChange:e=>V({badgeRu:e.target.value})})]}),L.stats.map((e,a)=>(0,i.jsxs)("label",{className:"admin-field",children:["Подпись #",a+1," (RU)",(0,i.jsx)("input",{className:"admin-input",value:e.labelRu||"",onChange:a=>X(e.id,{labelRu:a.target.value})})]},e.id))]}),(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"UZ"}),(0,i.jsxs)("label",{className:"admin-field",children:["Бейдж (UZ)",(0,i.jsx)("input",{className:"admin-input",value:L.badgeUz,onChange:e=>V({badgeUz:e.target.value})})]}),L.stats.map((e,a)=>(0,i.jsxs)("label",{className:"admin-field",children:["Подпись #",a+1," (UZ)",(0,i.jsx)("input",{className:"admin-input",value:e.labelUz||"",onChange:a=>X(e.id,{labelUz:a.target.value})})]},e.id))]})]}),(0,i.jsx)("div",{className:"admin-inline",children:(0,i.jsx)("button",{className:"admin-button",disabled:M,onClick:$,children:M?"...":"Сохранить"})})]}),(0,i.jsxs)("section",{className:"admin-card stack",children:[(0,i.jsxs)("div",{className:"admin-inline",children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Локации (О нас)"}),(0,i.jsxs)("div",{className:"admin-pill",children:["Выбрано: ",_.length,"/3"]})]}),(0,i.jsx)("p",{className:"admin-subtitle",children:"Выберите 3 локации из Poster, задайте название и описание на RU/UZ, координаты и адрес."}),(0,i.jsxs)("div",{className:"admin-grid",children:[(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Выбранные локации"}),0===_.length?(0,i.jsx)("div",{className:"admin-subtitle",children:"Пока не выбрано ни одной локации."}):_.map(e=>{var a,l;let s=e.lat&&e.lng?"https://maps.google.com/maps?q=".concat(e.lat,",").concat(e.lng,"&z=15&output=embed"):"";return(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsxs)("div",{className:"admin-inline",children:[(0,i.jsxs)("div",{className:"admin-subtitle",children:["ID: ",e.id]}),e.spotId?(0,i.jsxs)("div",{className:"admin-pill",children:["Poster: ",e.spotId]}):null,(0,i.jsxs)("div",{className:"admin-inline",style:{marginLeft:"auto"},children:[(0,i.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>H(e.id,-1),children:"↑"}),(0,i.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>H(e.id,1),children:"↓"}),(0,i.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>{var a;return a=e.id,void W(e=>e.filter(e=>e.id!==a))},children:"Удалить"})]})]}),(0,i.jsxs)("div",{className:"admin-grid",children:[(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"RU"}),(0,i.jsxs)("label",{className:"admin-field",children:["Название (RU)",(0,i.jsx)("input",{className:"admin-input",value:e.nameRu||"",onChange:a=>G(e.id,{nameRu:a.target.value})})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Адрес (RU)",(0,i.jsx)("input",{className:"admin-input",value:e.addressRu||"",onChange:a=>G(e.id,{addressRu:a.target.value})})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Описание (RU)",(0,i.jsx)("textarea",{className:"admin-textarea",value:e.descRu||"",onChange:a=>G(e.id,{descRu:a.target.value})})]})]}),(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"UZ"}),(0,i.jsxs)("label",{className:"admin-field",children:["Название (UZ)",(0,i.jsx)("input",{className:"admin-input",value:e.nameUz||"",onChange:a=>G(e.id,{nameUz:a.target.value})})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Адрес (UZ)",(0,i.jsx)("input",{className:"admin-input",value:e.addressUz||"",onChange:a=>G(e.id,{addressUz:a.target.value})})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Описание (UZ)",(0,i.jsx)("textarea",{className:"admin-textarea",value:e.descUz||"",onChange:a=>G(e.id,{descUz:a.target.value})})]})]}),(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Координаты"}),(0,i.jsxs)("label",{className:"admin-field",children:["Широта (lat)",(0,i.jsx)("input",{className:"admin-input",value:null!==(a=e.lat)&&void 0!==a?a:"",onChange:a=>G(e.id,{lat:a.target.value?Number(a.target.value):null})})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Долгота (lng)",(0,i.jsx)("input",{className:"admin-input",value:null!==(l=e.lng)&&void 0!==l?l:"",onChange:a=>G(e.id,{lng:a.target.value?Number(a.target.value):null})})]}),s?(0,i.jsx)("div",{className:"admin-card",style:{padding:0,overflow:"hidden"},children:(0,i.jsx)("iframe",{title:"map-".concat(e.id),src:s,style:{width:"100%",height:180,border:0},loading:"lazy"})}):(0,i.jsx)("div",{className:"admin-subtitle",children:"Добавьте координаты для карты."}),e.lat&&e.lng?(0,i.jsx)("a",{className:"admin-button admin-button-muted",href:"https://www.google.com/maps?q=".concat(e.lat,",").concat(e.lng),target:"_blank",rel:"noreferrer",children:"Открыть карту"}):null]})]})]},e.id)})]}),(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Заведения из Poster"}),(0,i.jsx)("input",{className:"admin-input",placeholder:"Поиск по названию или адресу...",value:I,onChange:e=>T(e.target.value)}),(0,i.jsx)("div",{className:"stack",children:ee.map(e=>{let a=_.some(a=>a.spotId===e.spot_id);return(0,i.jsxs)("div",{className:"admin-inline",children:[(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:e.name}),(0,i.jsx)("div",{className:"admin-subtitle",children:e.address}),(0,i.jsx)("div",{className:"admin-subtitle",children:e.lat&&e.lng?"".concat(e.lat,", ").concat(e.lng):"Координаты не заданы"})]}),(0,i.jsx)("button",{className:"admin-button",disabled:a||_.length>=3,onClick:()=>{var a;return a=e,void(!(_.length>=3)&&(_.some(e=>e.spotId===a.spot_id)||W(e=>{var l,i,s;return[...e,{id:a.spot_id,spotId:a.spot_id,nameRu:a.name,nameUz:"",addressRu:null!==(l=a.address)&&void 0!==l?l:"",addressUz:"",descRu:"",descUz:"",lat:null!==(i=a.lat)&&void 0!==i?i:null,lng:null!==(s=a.lng)&&void 0!==s?s:null}]})))},children:a?"Добавлено":"Добавить"})]},e.spot_id)})}),_.length>=3?(0,i.jsx)("div",{className:"admin-subtitle",children:"Можно выбрать максимум 3 локации."}):null]})]}),(0,i.jsxs)("div",{className:"admin-inline",children:[(0,i.jsx)("button",{className:"admin-button",disabled:D,onClick:Q,children:D?"...":"Сохранить"}),(0,i.jsx)("div",{className:"admin-subtitle",children:"Эти локации появятся на странице “О нас”."})]})]}),(0,i.jsxs)("section",{className:"admin-card stack",children:[(0,i.jsxs)("div",{className:"admin-inline",children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Популярные товары"}),(0,i.jsxs)("div",{className:"admin-pill",children:["Выбрано: ",y.length]})]}),(0,i.jsx)("p",{className:"admin-subtitle",children:"Выберите товары для главной страницы. Порядок отображения сохраняется."}),(0,i.jsxs)("div",{className:"admin-grid",children:[(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Выбрано"}),0===F.length?(0,i.jsx)("div",{className:"admin-subtitle",children:"Пока ничего не выбрано."}):F.map(e=>{var a,l,s;let n=c(null!==(a=e.product_id)&&void 0!==a?a:""),t=c(null!==(l=e.product_name)&&void 0!==l?l:"")||"Без названия",d=c(null!==(s=e.category_name)&&void 0!==s?s:""),r=e.photo_origin||e.photo||e.image||"";return(0,i.jsxs)("div",{className:"admin-inline",style:{alignItems:"flex-start"},children:[(0,i.jsxs)("div",{className:"admin-media",style:{flex:1},children:[(0,i.jsx)("div",{className:"admin-thumb",style:{width:76,height:76},children:r?(0,i.jsx)("img",{src:r,alt:t,loading:"lazy"}):(0,i.jsx)("div",{className:"admin-thumb__empty",children:"Нет фото"})}),(0,i.jsxs)("div",{className:"stack",style:{gap:4},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:t}),d?(0,i.jsx)("div",{className:"admin-subtitle",children:d}):null,(0,i.jsxs)("div",{className:"admin-subtitle",children:["ID: ",n]})]})]}),(0,i.jsxs)("div",{className:"admin-inline",style:{marginLeft:"auto"},children:[(0,i.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>B(n,-1),children:"↑"}),(0,i.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>B(n,1),children:"↓"}),(0,i.jsx)("button",{className:"admin-button admin-button-muted",onClick:()=>{w(e=>e.filter(e=>e!==n))},children:"Удалить"})]})]},n)})]}),(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Все товары"}),(0,i.jsx)("input",{className:"admin-input",placeholder:"Поиск товара или категории...",value:U,onChange:e=>S(e.target.value)}),(0,i.jsx)("div",{className:"stack",children:q.slice(0,80).map(e=>{var a,l,s;let n=c(null!==(a=e.product_id)&&void 0!==a?a:""),t=c(null!==(l=e.product_name)&&void 0!==l?l:"")||"Без названия",d=c(null!==(s=e.category_name)&&void 0!==s?s:""),r=e.photo_origin||e.photo||e.image||"";return(0,i.jsxs)("div",{className:"admin-inline",style:{alignItems:"flex-start"},children:[(0,i.jsxs)("div",{className:"admin-media",style:{flex:1},children:[(0,i.jsx)("div",{className:"admin-thumb",style:{width:70,height:70},children:r?(0,i.jsx)("img",{src:r,alt:t,loading:"lazy"}):(0,i.jsx)("div",{className:"admin-thumb__empty",children:"Нет фото"})}),(0,i.jsxs)("div",{className:"stack",style:{gap:4},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:t}),d?(0,i.jsx)("div",{className:"admin-subtitle",children:d}):null,(0,i.jsxs)("div",{className:"admin-subtitle",children:["ID: ",n]})]})]}),(0,i.jsx)("button",{className:"admin-button",onClick:()=>{n&&w(e=>e.includes(n)?e:[...e,n])},children:"Добавить"})]},n)})}),q.length>80?(0,i.jsx)("div",{className:"admin-subtitle",children:"Показаны первые 80 результатов."}):null]})]}),(0,i.jsxs)("div",{className:"admin-inline",children:[(0,i.jsx)("button",{className:"admin-button",disabled:k,onClick:Y,children:k?"...":"Сохранить"}),(0,i.jsx)("div",{className:"admin-subtitle",children:"Эти товары появятся в карусели на главной странице."})]})]}),t.map(e=>(0,i.jsxs)("section",{className:"admin-card stack",children:[(0,i.jsx)("div",{style:{fontWeight:600},children:e.title}),(0,i.jsx)("div",{className:"admin-grid",children:["ru","uz"].map(a=>{let l=r(e.slug,a),s=j[l]||{slug:e.slug,locale:a};return(0,i.jsxs)("div",{className:"admin-card stack",style:{boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:a.toUpperCase()}),(0,i.jsxs)("label",{className:"admin-field",children:["Заголовок",(0,i.jsx)("input",{className:"admin-input",value:s.title||"",onChange:l=>et(e.slug,a,{title:l.target.value})})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Текст",(0,i.jsx)("textarea",{className:"admin-textarea",value:s.body||"",onChange:l=>et(e.slug,a,{body:l.target.value})})]}),(0,i.jsx)("div",{className:"admin-divider"}),(0,i.jsxs)("label",{className:"admin-field",children:["Meta title",(0,i.jsx)("input",{className:"admin-input",value:s.seoTitle||"",onChange:l=>et(e.slug,a,{seoTitle:l.target.value})})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Meta description",(0,i.jsx)("textarea",{className:"admin-textarea",value:s.seoDescription||"",onChange:l=>et(e.slug,a,{seoDescription:l.target.value})})]}),(0,i.jsxs)("label",{className:"admin-field",children:["Meta keywords",(0,i.jsx)("input",{className:"admin-input",placeholder:"ключ1, ключ2, ключ3",value:s.seoKeywords||"",onChange:l=>et(e.slug,a,{seoKeywords:l.target.value})})]}),(0,i.jsx)("button",{className:"admin-button",style:{width:"100%"},disabled:p===l,onClick:()=>ed(e.slug,a),children:p===l?"...":"Сохранить"})]},l)})})]},e.slug))]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[8441,6587,7358],()=>a(4456)),_N_E=e.O()}]);