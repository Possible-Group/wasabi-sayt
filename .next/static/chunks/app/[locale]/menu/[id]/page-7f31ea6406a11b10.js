(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3245],{290:(e,t,i)=>{"use strict";i.d(t,{IH:()=>l,Xl:()=>a,bE:()=>s,sX:()=>o,vU:()=>u});let r="wasabi_cart_v1";function a(){try{return JSON.parse(localStorage.getItem(r)||"[]")}catch(e){return[]}}function n(e){localStorage.setItem(r,JSON.stringify(e))}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=a(),r=i.findIndex(t=>t.product_id===e.product_id);return r>=0?i[r].qty+=t:i.push({...e,qty:t}),n(i),i}function l(e,t){let i=a().map(i=>i.product_id===e?{...i,qty:t}:i).filter(e=>e.qty>0);return n(i),i}function o(){n([])}function u(e){return e.reduce((e,t)=>e+t.price*t.qty,0)}},1272:(e,t,i)=>{"use strict";i.d(t,{t:()=>a});let r={ru:{common:{brand:"Wasabi Sushi",slogan:"Свежо, быстро, честно",openMenu:"Открыть меню",orderInTelegram:"Заказать в Telegram",menu:"Меню",cart:"Корзина",checkout:"Оформление заказа",closedNow:"Сейчас не рабочее время",workHours:"Часы работы",addToCart:"В корзину",add:"В корзину",qty:"Кол-во",delivery:"Доставка",pickup:"На вынос",persons:"Персон",phone:"Телефон",name:"Имя",address:"Адрес",comment:"Комментарий",promo:"Промокод",apply:"Применить",total:"Итого",placeOrder:"Оформить заказ",admin:"Админ",login:"Логин",password:"Пароль",signIn:"Войти",logout:"Выйти",closed:"Сейчас не рабочее время"}},uz:{common:{brand:"WASABI SUSHI",slogan:"Yangi, tez, halol",openMenu:"Menyuni ochish",orderInTelegram:"Telegramda buyurtma",menu:"Menyu",cart:"Savat",checkout:"Buyurtma berish",closedNow:"Hozir ish vaqti emas",workHours:"Ish vaqti",addToCart:"Savatga",add:"Savatga",qty:"Soni",delivery:"Yetkazib berish",pickup:"Olib ketish",persons:"Odam",phone:"Telefon",name:"Ism",address:"Manzil",comment:"Izoh",promo:"Promokod",apply:"Qo‘llash",total:"Jami",placeOrder:"Buyurtma berish",admin:"Admin",login:"Login",password:"Parol",signIn:"Kirish",logout:"Chiqish",closed:"Hozir ish vaqti emas"}}};function a(e,t,i){let a=r[e];if(!t)return a;let n=t.split("."),s=a;for(let e of n){if(!s||"object"!=typeof s||!(e in s))return null!=i?i:t;s=s[e]}return"string"==typeof s?s:null!=i?i:t}},5114:(e,t,i)=>{"use strict";i.d(t,{default:()=>c});var r=i(5155),a=i(2115),n=i(8173),s=i.n(n),l=i(290),o=i(1272);let u={ru:{back:"Вернуться на главную",ingredients:"Состав",description:"Описание",badge:"Скидка",gift:"Подарок",added:"добавлено в корзину"},uz:{back:"Bosh sahifaga qaytish",ingredients:"Tarkibi",description:"Tavsif",badge:"Chegirma",gift:"Sovg'a",added:"savatga qo'shildi"}};function c(e){let{locale:t,product:i}=e,n="uz"===t?u.uz:u.ru,[c,d]=(0,a.useState)(1),[m,p]=(0,a.useState)(null),h=(0,a.useRef)(null),[_,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{fetch("/api/poster/promotions").then(e=>e.json()).then(e=>{var t;f((null==e?void 0:null===(t=e.discounts)||void 0===t?void 0:t[i.id])||null)}).catch(()=>f(null))},[i.id]),(0,a.useEffect)(()=>()=>{h.current&&window.clearTimeout(h.current)},[]);let g=(0,a.useMemo)(()=>(function(e,t){if(!t)return null;if(t.is_bonus)return 0;let i=null;t.discount_value>0&&(3===t.result_type?i=Math.max(0,Math.round(e*(1-t.discount_value/100))):1===t.result_type&&(i=Math.max(0,Math.round(e-t.discount_value))));let r=function(e){if(!Array.isArray(e)||0===e.length)return null;let t=[],i=[];for(let n of e){var r,a;let e=function e(t){if(null==t)return null;if("number"==typeof t)return Number.isFinite(t)?t:null;if("string"==typeof t){let e=Number(t.replace(/\s+/g,"").replace(",",".").replace(/[^0-9.-]/g,""));return Number.isFinite(e)?e:null}if(Array.isArray(t)){for(let i of t){let t=e(i);if(t&&t>0)return t}return null}if("object"==typeof t){for(let i of[t.price_value,t.price,t.value,t.sum,t.amount,t.price_1,t.price1,t["1"]]){let t=e(i);if(t&&t>0)return t}for(let i of Object.values(t)){let t=e(i);if(t&&t>0)return t}}return null}(n);e&&!(e<=0)&&("1"===("object"==typeof n&&n?String(null!==(a=null!==(r=n.price_id)&&void 0!==r?r:n.priceId)&&void 0!==a?a:""):"")?t.push(Math.round(e)):i.push(Math.round(e)))}let n=t.length?t:i;return n.length?Math.min(...n):null}(t.discount_prices);return null!==r&&r>0?null===i?r:Math.min(i,r):i})(i.price,_),[i.price,_]),b=(null==_?void 0:_.is_bonus)||null!==g&&g<i.price,v=b&&null!==g?g:i.price,y="uz"===t?"so'm":"сум",N=e=>{p(e),h.current&&window.clearTimeout(h.current),h.current=window.setTimeout(()=>p(null),2200)},x=(null==_?void 0:_.is_bonus)?n.gift:n.badge,j=(null==_?void 0:_.is_bonus)?"product-detail__badge":"product-detail__badge product-detail__badge--discount";return(0,r.jsxs)("div",{className:"product-detail",children:[(0,r.jsxs)("div",{className:"product-detail__media",children:[b?(0,r.jsx)("div",{className:j,children:x}):null,(0,r.jsx)("img",{src:i.image||"/icons/logo.png",alt:i.name,loading:"lazy",decoding:"async"})]}),(0,r.jsxs)("div",{className:"product-detail__info",children:[(0,r.jsxs)(s(),{className:"product-detail__back",href:"/".concat(t),children:["← ",n.back]}),i.categoryName?(0,r.jsx)("div",{className:"product-detail__category",children:i.categoryName}):null,(0,r.jsx)("h1",{className:"product-detail__title",children:i.name}),(0,r.jsx)("div",{className:"product-detail__price",children:b&&null!==g?(0,r.jsxs)("div",{className:"site-price",children:[(0,r.jsxs)("span",{className:"site-price__old",children:[(i.price/100).toLocaleString()," ",y]}),(0,r.jsxs)("span",{className:"site-price__new",children:[(g/100).toLocaleString()," ",y]})]}):(0,r.jsxs)("span",{children:[(i.price/100).toLocaleString()," ",y]})}),i.description?(0,r.jsxs)("div",{className:"product-detail__section",children:[(0,r.jsx)("div",{className:"product-detail__label",children:n.description}),(0,r.jsx)("p",{className:"product-detail__text",children:i.description})]}):null,i.ingredients?(0,r.jsxs)("div",{className:"product-detail__section",children:[(0,r.jsx)("div",{className:"product-detail__label",children:n.ingredients}),(0,r.jsx)("p",{className:"product-detail__text",children:i.ingredients})]}):null,(0,r.jsxs)("div",{className:"product-detail__actions",children:[(0,r.jsxs)("div",{className:"site-qty",children:[(0,r.jsx)("button",{className:"site-qty__btn",type:"button",onClick:()=>d(e=>Math.max(1,e-1)),"aria-label":"uz"===t?"Kamaytirish":"Уменьшить",children:"−"}),(0,r.jsx)("div",{className:"site-qty__val",children:c}),(0,r.jsx)("button",{className:"site-qty__btn",type:"button",onClick:()=>d(e=>e+1),"aria-label":"uz"===t?"Oshirish":"Увеличить",children:"+"})]}),(0,r.jsx)("button",{className:"site-button site-button--primary",type:"button",onClick:()=>{(0,l.bE)({product_id:i.id,name:i.name,price:v,image:i.image||void 0},c),N("".concat(i.name," \xd7 ").concat(c," ").concat(n.added))},children:(0,o.t)(t,"common.add")})]})]}),m&&(0,r.jsx)("div",{className:"site-toast",role:"status","aria-live":"polite",children:(0,r.jsx)("div",{className:"site-toast__body",children:m})})]})}},6046:(e,t,i)=>{"use strict";var r=i(6658);i.o(r,"useParams")&&i.d(t,{useParams:function(){return r.useParams}}),i.o(r,"usePathname")&&i.d(t,{usePathname:function(){return r.usePathname}}),i.o(r,"useRouter")&&i.d(t,{useRouter:function(){return r.useRouter}}),i.o(r,"useSearchParams")&&i.d(t,{useSearchParams:function(){return r.useSearchParams}})},7566:(e,t,i)=>{Promise.resolve().then(i.bind(i,7564)),Promise.resolve().then(i.bind(i,4348)),Promise.resolve().then(i.bind(i,5114))}},e=>{var t=t=>e(e.s=t);e.O(0,[3499,8441,6587,7358],()=>t(7566)),_N_E=e.O()}]);